<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Casos Cl√≠nicos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="topbar">
    <div class="logo">Simu<span>LACIR</span></div>
    <nav class="tabs-nav">
      <button class="tab-link active" data-tab="inicio">In√≠cio</button>
      <button class="tab-link" data-tab="casos">Casos</button>
      <button class="tab-link" data-tab="liga">√Årea da Liga</button>
      <button class="tab-link" data-tab="upload">Upload</button>
    </nav>
  </header>

  <main>
    <section id="tab-inicio" class="tab-section active">
      <!-- HERO / APRESENTA√á√ÉO -->
      <section class="hero">
        <div class="hero-text">
          <h1>SimuLACIR ‚Äì simulador de casos cl√≠nicos da LACIR Bahia</h1>
          <p>
            Uma plataforma em desenvolvimento para treinar decis√µes em cirurgia e
            urg√™ncias, com casos interativos, alternativas comentadas e feedback imediato.
          </p>
          <a href="#caso-demo" class="btn-primary">Come√ßar pelo caso de demonstra√ß√£o</a>
        </div>
      </section>

      <!-- SE√á√ÉO SOBRE -->
      <section id="sobre" class="section">
        <h2>Bem-vindo ao SimuLACIR</h2>
        <p>
          O <strong>SimuLACIR</strong> √© o simulador de casos cl√≠nicos da
          <strong>Liga Acad√™mica de Cirurgia da Bahia (LACIR)</strong>.
          Ele foi criado para que estudantes de medicina possam treinar
          racioc√≠nio cl√≠nico em um ambiente seguro, interativo e focado em
          tomada de decis√£o.
        </p>

        <p>
          Nesta demonstra√ß√£o inicial, oferecemos um caso cl√≠nico b√°sico para
          ilustrar a ideia. No futuro, queremos disponibilizar uma biblioteca
          com dezenas de casos, n√≠veis de dificuldade, hist√≥rico e feedback
          personalizado.
        </p>

        <div class="cards-grid">
          <div class="info-card">
            <h3>Casos realistas</h3>
            <p>
              Enunciados curtos, objetivos e pr√≥ximos do dia a dia, com alternativas de conduta e explica√ß√µes.
            </p>
          </div>
          <div class="info-card">
            <h3>Feedback imediato</h3>
            <p>
              Ao clicar em uma op√ß√£o, voc√™ recebe coment√°rios e refer√™ncias r√°pidas sobre a decis√£o.
            </p>
          </div>
          <div class="info-card">
            <h3>Foco em tomada de decis√£o</h3>
            <p>
              N√£o √© apenas memorizar: queremos refor√ßar o racioc√≠nio cl√≠nico e a escolha da melhor conduta.
            </p>
          </div>
        </div>
      </section>
    </section>

    <section id="tab-casos" class="tab-section">
      <!-- CASO DEMONSTRATIVO -->
      <section id="caso-demo" class="section">
        <h2>Casos cl√≠nicos</h2>
        <p class="section-subtitle">
          Selecione um caso na lista e responda √†s alternativas. Por enquanto h√° apenas um caso de exemplo.
        </p>

        <div class="case-layout">
          <aside class="case-list">
            <h4>Casos dispon√≠veis</h4>
            <ul id="lista-casos"></ul>
          </aside>

          <div class="case-card">
            <h3 id="titulo-caso">T√≠tulo do caso</h3>
            <p id="enunciado"></p>

            <ul class="opcoes-lista">
              <li><button class="opcao-btn" data-alt="a"></button></li>
              <li><button class="opcao-btn" data-alt="b"></button></li>
              <li><button class="opcao-btn" data-alt="c"></button></li>
              <li><button class="opcao-btn" data-alt="d"></button></li>
            </ul>

            <div id="resultado" class="resultado">
              <p>Escolha uma alternativa para ver o feedback.</p>
            </div>
          </div>
        </div>
      </section>
    </section>

    <section id="tab-liga" class="tab-section">
      <h2>√Årea da Liga ‚Äì SimuLACIR</h2>
      <p>
        Esta √°rea √© destinada aos ligantes da Liga Acad√™mica de Cirurgia da Bahia (LACIR).
        Aqui ser√£o disponibilizados casos oficiais, trilhas de estudo e materiais internos.
      </p>
      <p>
        No momento, esta se√ß√£o √© apenas um esqueleto. No futuro, exibiremos aqui todos os casos
        com <code>nivelAcesso: "liga"</code> ou <code>"seletivo"</code>.
      </p>
      <p>
        Acesse usando a senha da liga para visualizar o conte√∫do completo.
      </p>
    </section>

    <section id="tab-upload" class="tab-section">
      <!-- UPLOAD / VERS√ÉO FUTURA -->
      <section id="upload" class="section">
        <h2>Upload de caso cl√≠nico (em constru√ß√£o)</h2>
        <p>
          Nesta primeira vers√£o, o upload ainda n√£o processa o arquivo ‚Äî a ideia √© s√≥
          esbo√ßar a interface. Em futuras vers√µes, vamos conectar isso a um backend/IA
          que converta o caso em simula√ß√µes interativas.
        </p>

        <div class="upload-box">
          <label for="fileInput">Selecione um arquivo de caso cl√≠nico (ex: .txt, .md):</label>
          <input id="fileInput" type="file" disabled>
          <p class="upload-info">
            ‚ö†Ô∏è Ainda n√£o funcional ‚Äî recurso planejado para vers√µes futuras.
          </p>
        </div>
      </section>
    </section>
  </main>

  <footer class="footer">
    <p>Projeto em desenvolvimento ‚Äî Simulador de Casos Cl√≠nicos.</p>
  </footer>

  <script>
    const SENHA_LIGA = "simulacir2025";
    let ligaDesbloqueada = false;

    const tabLinks = document.querySelectorAll(".tab-link");
    const tabSections = document.querySelectorAll(".tab-section");

    tabLinks.forEach((link) => {
      link.addEventListener("click", () => {
        const tab = link.getAttribute("data-tab");

        if (tab === "liga" && !ligaDesbloqueada) {
          const senha = window.prompt("Digite a senha da Liga (SimuLACIR):");
          if (senha !== SENHA_LIGA) {
            window.alert("Senha incorreta. Acesso restrito √† Liga.");
            return;
          }
          ligaDesbloqueada = true;
          window.alert("Acesso √† √Årea da Liga liberado.");
        }

        tabLinks.forEach((l) => l.classList.remove("active"));
        tabSections.forEach((sec) => sec.classList.remove("active"));

        link.classList.add("active");
        const alvo = document.getElementById("tab-" + tab);
        if (alvo) {
          alvo.classList.add("active");
        }
      });
    });
    // Base de dados dos casos (por enquanto, apenas 1 caso)
    const casos = [
      {
        id: "dor-toracica",
        titulo: "Paciente com dor tor√°cica",
        fonte: "oficial",
        nivelAcesso: "publico",
        tags: ["urg√™ncia", "dor tor√°cica", "cardiologia", "pronto-atendimento"],
        enunciado:
          "Homem, 58 anos, hipertenso, tabagista, procura o pronto-atendimento por dor tor√°cica em aperto iniciada h√° cerca de 2 horas, irradiando para o bra√ßo esquerdo, associada a sudorese fria e n√°useas. Ao exame: PA 150/90 mmHg, FC 100 bpm, satura√ß√£o 94% em ar ambiente. N√£o h√° sinais de instabilidade hemodin√¢mica importante. Qual a melhor conduta imediata?",
        alternativas: {
          a: "Prescrever AINE para dor muscular e orientar retorno se piorar.",
          b: "Encaminhar imediatamente para sala de emerg√™ncia, realizar ECG e iniciar manejo de s√≠ndrome coronariana aguda.",
          c: "Solicitar teste ergom√©trico ambulatorial e dar alta, pois est√° est√°vel.",
          d: "Solicitar apenas radiografia de t√≥rax e aguardar o resultado para decidir."
        },
        correta: "b",
        explicacoes: {
          a: "Inadequado: quadro t√≠pico de dor tor√°cica isqu√™mica em paciente de alto risco. Tratar como dor muscular e apenas prescrever AINE atrasa o diagn√≥stico de s√≠ndrome coronariana aguda.",
          b: "Correto: trata-se de dor tor√°cica com caracter√≠sticas t√≠picas, em paciente com fatores de risco cardiovasculares. A conduta √© encaminhar para sala de emerg√™ncia, monitorizar, realizar ECG e exames iniciais, e iniciar manejo de s√≠ndrome coronariana aguda conforme protocolos.",
          c: "Inadequado: teste ergom√©trico ambulatorial n√£o √© indicado como primeira abordagem em paciente com dor tor√°cica t√≠pica em evolu√ß√£o. Primeiro, √© obrigat√≥rio excluir/confirmar s√≠ndrome coronariana aguda.",
          d: "Inadequado: embora RX de t√≥rax possa ser √∫til em contexto de dor tor√°cica, n√£o √© o exame inicial priorit√°rio diante de forte suspeita de s√≠ndrome coronariana aguda. ECG e manejo imediato s√£o priorit√°rios."
        }
      }
    ];

    const senhaLigaInput = document.getElementById("senha-liga");
    const btnSenhaLiga = document.getElementById("btn-senha-liga");
    const conteudoLiga = document.getElementById("conteudo-liga");
    const statusLiga = document.getElementById("status-liga");
    const listaCasosLiga = document.getElementById("lista-casos-liga");

    let indiceCasoAtual = 0;

    // Refer√™ncias aos elementos da interface
    const listaCasosEl = document.getElementById("lista-casos");
    const tituloCasoEl = document.getElementById("titulo-caso");
    const enunciadoEl = document.getElementById("enunciado");
    const botoesOpcoes = document.querySelectorAll(".opcao-btn");
    const resultadoDiv = document.getElementById("resultado");

    // Monta a lista de casos a partir do array "casos"
    if (listaCasosEl) {
      casos.forEach((caso, indice) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.textContent = `Caso ${indice + 1} ‚Äì ${caso.titulo}`;
        btn.classList.add("case-list-btn");
        if (indice === 0) {
          btn.classList.add("active");
        }
        btn.dataset.indice = indice.toString();
        li.appendChild(btn);
        listaCasosEl.appendChild(li);
      });
    }

    function montarCasosLiga() {
      if (!listaCasosLiga) return;
      listaCasosLiga.innerHTML = "";

      const casosRestritos = casos.filter((c) => c.nivelAcesso !== "publico");

      if (casosRestritos.length === 0) {
        const vazio = document.createElement("li");
        vazio.classList.add("liga-cases__empty");
        vazio.textContent = "Nenhum caso restrito cadastrado ainda. Em breve, publicaremos os casos oficiais da LACIR.";
        listaCasosLiga.appendChild(vazio);
        return;
      }

      casosRestritos.forEach((caso) => {
        const item = document.createElement("li");
        item.classList.add("liga-cases__item");

        const titulo = document.createElement("h4");
        titulo.textContent = caso.titulo;

        const meta = document.createElement("p");
        meta.classList.add("liga-cases__meta");
        meta.textContent = `Fonte: ${caso.fonte.toUpperCase()} ‚Ä¢ Acesso: ${caso.nivelAcesso}`;

        const tagList = document.createElement("div");
        tagList.classList.add("liga-cases__tags");
        caso.tags.forEach((tag) => {
          const chip = document.createElement("span");
          chip.classList.add("liga-tag");
          chip.textContent = tag;
          tagList.appendChild(chip);
        });

        item.appendChild(titulo);
        item.appendChild(meta);
        item.appendChild(tagList);

        listaCasosLiga.appendChild(item);
      });
    }

    montarCasosLiga();

    function liberarLiga() {
      if (ligaDesbloqueada) return;
      const senhaDigitada = senhaLigaInput ? senhaLigaInput.value.trim() : "";

      if (senhaDigitada !== SENHA_LIGA) {
        window.alert("Senha incorreta. Verifique com a diretoria da liga.");
        return;
      }

      ligaDesbloqueada = true;
      if (conteudoLiga) {
        conteudoLiga.classList.remove("bloqueado");
      }
      if (statusLiga) {
        statusLiga.textContent = "üîì Acesso liberado. Casos reservados vis√≠veis para ligantes.";
      }
      window.alert("Acesso liberado para a √°rea do ligante.");
    }

    if (btnSenhaLiga) {
      btnSenhaLiga.addEventListener("click", liberarLiga);
    }

    if (senhaLigaInput) {
      senhaLigaInput.addEventListener("keydown", (ev) => {
        if (ev.key === "Enter") {
          liberarLiga();
        }
      });
    }

    // Fun√ß√£o para carregar um caso no card
    function carregarCaso(indice) {
      indiceCasoAtual = indice;
      const caso = casos[indiceCasoAtual];

      if (!tituloCasoEl || !enunciadoEl || !resultadoDiv) {
        console.error("Elementos do caso cl√≠nico n√£o encontrados no HTML.");
        return;
      }

      tituloCasoEl.textContent = caso.titulo;
      enunciadoEl.textContent = caso.enunciado;

      botoesOpcoes.forEach((btn) => {
        const alt = btn.dataset.alt; // "a", "b", "c", "d"
        btn.classList.remove("correta", "errada");
        if (alt && caso.alternativas[alt]) {
          btn.textContent = `${alt}) ${caso.alternativas[alt]}`;
        }
      });

      resultadoDiv.innerHTML = "<p>Escolha uma alternativa para ver o feedback.</p>";
    }

    // Eventos de clique na lista de casos
    if (listaCasosEl) {
      const botoesLista = listaCasosEl.querySelectorAll(".case-list-btn");
      botoesLista.forEach((btn) => {
        btn.addEventListener("click", () => {
          const indice = parseInt(btn.dataset.indice || "0", 10);

          botoesLista.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          carregarCaso(indice);
        });
      });
    }

    // Eventos de clique nas alternativas
    botoesOpcoes.forEach((btn) => {
      btn.addEventListener("click", () => {
        const alt = btn.dataset.alt;
        const caso = casos[indiceCasoAtual];

        if (!alt || !caso) return;

        const correta = caso.correta === alt;

        botoesOpcoes.forEach((b) => b.classList.remove("correta", "errada"));
        btn.classList.add(correta ? "correta" : "errada");

        resultadoDiv.innerHTML = `
          <p><strong>Voc√™ escolheu: (${alt})</strong></p>
          <p class="${correta ? "texto-correto" : "texto-errado"}">
            ${correta ? "‚úÖ Resposta correta." : "‚ùå Resposta incorreta."}
          </p>
          <p>${caso.explicacoes[alt]}</p>
        `;
      });
    });

    // Inicializa com o primeiro caso
    if (casos.length > 0) {
      carregarCaso(0);
    }
  </script>
</body>
</html>
